<Window x:Class="ImageGallery.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:resx="clr-namespace:ImageGallery.Resources"
        Title="{x:Static resx:Strings.MainWindow_Title}" 
        Height="600" 
        Width="800"
        Icon="Resources/Icons/app-icon.ico"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="CanResizeWithGrip"
        WindowState="Normal"
        Background="Black"
        KeyDown="Window_KeyDown"
        Loaded="Window_Loaded"
        MouseMove="Window_MouseMove"
        MouseLeftButtonDown="Window_MouseLeftButtonDown_Border"
        MouseLeftButtonUp="Window_MouseLeftButtonUp_Border"
        MouseRightButtonDown="Window_MouseRightButtonDown_Border"
        MouseRightButtonUp="Window_MouseRightButtonUp_Border">
    <WindowChrome.WindowChrome>
        <WindowChrome 
            CaptionHeight="0"
            ResizeBorderThickness="5"
            GlassFrameThickness="0"
            CornerRadius="0"
            UseAeroCaptionButtons="False"/>
    </WindowChrome.WindowChrome>
    <Grid>
        <!-- Mosaic Grid -->
        <ItemsControl x:Name="MosaicDisplay" MouseWheel="MosaicDisplay_MouseWheel"
                      MouseLeftButtonDown="MosaicDisplay_MouseLeftButtonDown"
                      MouseLeftButtonUp="MosaicDisplay_MouseLeftButtonUp"
                      MouseRightButtonDown="MosaicDisplay_MouseRightButtonDown"
                      MouseRightButtonUp="MosaicDisplay_MouseRightButtonUp"
                      MouseMove="MosaicDisplay_MouseMove">
            <ItemsControl.RenderTransform>
                <TransformGroup>
                    <ScaleTransform x:Name="MosaicScaleTransform" ScaleX="1" ScaleY="1"/>
                    <TranslateTransform x:Name="MosaicTranslateTransform" X="0" Y="0"/>
                </TransformGroup>
            </ItemsControl.RenderTransform>
            <ItemsControl.RenderTransformOrigin>0.5,0.5</ItemsControl.RenderTransformOrigin>
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <UniformGrid x:Name="MosaicGrid" Rows="1" Columns="1"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Image Source="{Binding}" 
                           Stretch="Uniform" 
                           HorizontalAlignment="Center" 
                           VerticalAlignment="Center"/>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
        
        <!-- Loading Overlay -->
        <Border x:Name="LoadingOverlay" 
                Background="#DD000000" 
                Visibility="Visible">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock x:Name="LoadingText" 
                          Text="{x:Static resx:Strings.Loading_Images}" 
                          Foreground="White" 
                          FontSize="20" 
                          HorizontalAlignment="Center"
                          Margin="0,0,0,20"/>
                
                <!-- Import Progress -->
                <StackPanel x:Name="ImportProgressStack" Visibility="Collapsed" Margin="0,0,0,15">
                    <TextBlock Text="{x:Static resx:Strings.Importing_Files}" 
                              Foreground="#CCCCCC" 
                              FontSize="14" 
                              HorizontalAlignment="Center"
                              Margin="0,0,0,5"/>
                    <ProgressBar x:Name="ImportProgressBar" 
                                Width="300" 
                                Height="15" 
                                Minimum="0" 
                                Maximum="100" 
                                Value="0"/>
                    <TextBlock x:Name="ImportDetailsText" 
                              Text="" 
                              Foreground="#999999" 
                              FontSize="11" 
                              HorizontalAlignment="Center"
                              Margin="0,5,0,0"/>
                </StackPanel>
                
                <!-- Loading Progress -->
                <StackPanel x:Name="LoadingProgressStack" Visibility="Visible">
                    <TextBlock Text="{x:Static resx:Strings.Loading_Images}" 
                              Foreground="#CCCCCC" 
                              FontSize="14" 
                              HorizontalAlignment="Center"
                              Margin="0,0,0,5"/>
                    <ProgressBar x:Name="LoadingProgressBar" 
                                Width="300" 
                                Height="15" 
                                Minimum="0" 
                                Maximum="100" 
                                Value="0"/>
                    <TextBlock x:Name="LoadingDetailsText" 
                              Text="" 
                              Foreground="#999999" 
                              FontSize="11" 
                              HorizontalAlignment="Center"
                              Margin="0,5,0,0"/>
                </StackPanel>
                
                <!-- Shortcuts Guide -->
                <Border BorderBrush="#444444" 
                        BorderThickness="1" 
                        Padding="20" 
                        Margin="0,30,0,0"
                        Background="#22FFFFFF">
                    <StackPanel>
                        <TextBlock Text="{x:Static resx:Strings.Shortcuts_Title}" 
                                  Foreground="White" 
                                  FontSize="14" 
                                  FontWeight="Bold"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,10"/>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_ArrowKeys}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_ArrowKeys_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_SpaceEnter}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_SpaceEnter_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_F}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_F_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_D}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_D_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_ShiftLess}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_ShiftLess_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_ShiftGreater}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_ShiftGreater_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_PlusMinus}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_PlusMinus_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_M}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_M_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_N}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_N_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_I}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_I_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_CtrlW}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_CtrlW_Desc}"/>
                        </TextBlock>
                        <TextBlock Foreground="#CCCCCC" FontSize="11" Margin="0,2">
                            <Run Text="{x:Static resx:Strings.Shortcuts_CtrlQ}" FontWeight="Bold"/>
                            <Run Text="{x:Static resx:Strings.Shortcuts_CtrlQ_Desc}"/>
                        </TextBlock>
                    </StackPanel>
                </Border>
            </StackPanel>
        </Border>
        
        <!-- Left Flash -->
        <Grid x:Name="LeftFlash" 
              Opacity="0"
              HorizontalAlignment="Left"
              VerticalAlignment="Stretch"
              Width="100"
              ClipToBounds="True">
            <Ellipse Fill="White" 
                     Width="200" 
                     Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}}"
                     HorizontalAlignment="Left"
                     Margin="-100,0,0,0"/>
        </Grid>
        
        <!-- Right Flash -->
        <Grid x:Name="RightFlash" 
              Opacity="0"
              HorizontalAlignment="Right"
              VerticalAlignment="Stretch"
              Width="100"
              ClipToBounds="True">
            <Ellipse Fill="White" 
                     Width="200" 
                     Height="{Binding ActualHeight, RelativeSource={RelativeSource AncestorType=Window}}"
                     HorizontalAlignment="Right"
                     Margin="0,0,-100,0"/>
        </Grid>
        
        <!-- Pause/Play Icon -->
        <Viewbox x:Name="PausePlayIcon" 
                 Width="80" 
                 Height="80"
                 Visibility="Collapsed"
                 HorizontalAlignment="Center"
                 VerticalAlignment="Center">
            <Canvas Width="100" Height="100">
                <!-- Pause Icon (two bars) -->
                <Rectangle x:Name="PauseBar1" 
                          Width="20" 
                          Height="70" 
                          Fill="White" 
                          Canvas.Left="25" 
                          Canvas.Top="15"
                          Opacity="0.6"/>
                <Rectangle x:Name="PauseBar2" 
                          Width="20" 
                          Height="70" 
                          Fill="White" 
                          Canvas.Left="55" 
                          Canvas.Top="15"
                          Opacity="0.6"/>
                <!-- Play Icon (triangle) -->
                <Polygon x:Name="PlayTriangle" 
                        Points="30,15 30,85 80,50" 
                        Fill="White" 
                        Opacity="0.6"
                        Visibility="Collapsed"/>
            </Canvas>
        </Viewbox>
        
        <!-- Speed Indicator -->
        <Border x:Name="SpeedIndicator" 
                Background="#CC000000" 
                Padding="15,10"
                CornerRadius="5"
                Visibility="Collapsed"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <TextBlock x:Name="SpeedText" 
                      Foreground="White" 
                      FontSize="32"
                      FontWeight="Bold"
                      Text="5s"/>
        </Border>
        
        <!-- Zoom Indicator -->
        <Border x:Name="ZoomIndicator" 
                Background="#66000000" 
                Padding="12,8"
                CornerRadius="5"
                Visibility="Collapsed"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
            <TextBlock x:Name="ZoomText" 
                      Foreground="White" 
                      FontSize="24"
                      FontWeight="Bold"
                      Text="100%"/>
        </Border>
        
        <!-- Debug Console Overlay -->
        <Border x:Name="DebugConsole" 
                Background="#CC000000" 
                Padding="10"
                Visibility="Collapsed"
                VerticalAlignment="Bottom"
                MaxHeight="200">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
                <TextBox x:Name="LogTextBlock" 
                         Foreground="White" 
                         FontFamily="Consolas"
                         FontSize="12"
                         TextWrapping="Wrap"
                         Background="Transparent"
                         BorderThickness="0"
                         IsReadOnly="True"
                         IsReadOnlyCaretVisible="False"/>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>
